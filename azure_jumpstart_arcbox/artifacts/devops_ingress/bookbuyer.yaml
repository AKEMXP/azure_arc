apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$1
spec:
  ingressClassName: nginx
  rules:
  - host: {JS_HOST}
    http:
      paths:
      - pathType: ImplementationSpecific
        backend:
          service:
            name: bookbuyer
            port:
              number: 14001
        path: /bookbuyer
# ---
# kind: IngressBackend
# apiVersion: policy.openservicemesh.io/v1alpha1
# metadata:
#   name: backend
# spec:
#   backends:
#   - name: bookbuyer
#     port:
#       number: 14001
#       protocol: http
#   sources:
#   - kind: Service
#     namespace: ingress-nginx
#     name: ingress-nginx-controller
